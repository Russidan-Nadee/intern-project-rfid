
    asset_master {
        varchar(20) asset_no PK "NOT NULL"
        varchar(255) description "DEFAULT NULL"
        varchar(10) plant_code FK "DEFAULT NULL, INDEX"
        varchar(10) location_code FK "DEFAULT NULL, INDEX"
        varchar(50) serial_no UK "DEFAULT NULL, UNIQUE"
        varchar(50) inventory_no UK "DEFAULT NULL, UNIQUE"
        decimal(10_2) quantity "DEFAULT NULL"
        varchar(10) unit_code FK "DEFAULT NULL, INDEX"
        char(1) status "DEFAULT NULL, INDEX"
        varchar(20) created_by FK "DEFAULT NULL, INDEX"
        datetime created_at "DEFAULT NULL, INDEX"
        datetime deactivated_at "DEFAULT NULL"
    }

    asset_scan_log {
        int scan_id PK "NOT NULL, AUTO_INCREMENT"
        varchar(20) asset_no FK "DEFAULT NULL, INDEX"
        varchar(20) scanned_by FK "DEFAULT NULL, INDEX"
        varchar(10) location_code FK "DEFAULT NULL, INDEX"
        varchar(45) ip_address "DEFAULT NULL"
        text user_agent "DEFAULT NULL"
        timestamp scanned_at "DEFAULT CURRENT_TIMESTAMP"
    }

    asset_status_history {
        int history_id PK "NOT NULL, AUTO_INCREMENT"
        varchar(20) asset_no FK "DEFAULT NULL, INDEX"
        varchar(50) old_status "DEFAULT NULL"
        varchar(50) new_status "DEFAULT NULL"
        datetime changed_at "DEFAULT NULL"
        varchar(20) changed_by FK "DEFAULT NULL, INDEX"
        text remarks "DEFAULT NULL"
    }

    export_history {
        int export_id PK "NOT NULL, AUTO_INCREMENT"
        varchar(20) user_id FK "NOT NULL, INDEX"
        enum export_type "NOT NULL (assets,scan_logs,status_history)"
        char(1) status "NOT NULL, DEFAULT P (P=Pending,C=Completed,F=Failed)"
        json export_config "NOT NULL"
        varchar(500) file_path "DEFAULT NULL"
        bigint file_size "DEFAULT NULL"
        int total_records "DEFAULT NULL"
        datetime created_at "NOT NULL, DEFAULT CURRENT_TIMESTAMP, INDEX"
        datetime expires_at "DEFAULT NULL, INDEX"
        text error_message "DEFAULT NULL"
    }

    mst_location {
        varchar(10) location_code PK "NOT NULL"
        varchar(255) description "DEFAULT NULL"
        varchar(10) plant_code FK "DEFAULT NULL, INDEX"
    }

    mst_plant {
        varchar(10) plant_code PK "NOT NULL"
        varchar(255) description "DEFAULT NULL, INDEX"
    }

    mst_unit {
        varchar(10) unit_code PK "NOT NULL"
        varchar(50) name "DEFAULT NULL, INDEX"
    }

    mst_user {
        varchar(20) user_id PK "NOT NULL"
        varchar(100) username UK "DEFAULT NULL, UNIQUE, INDEX"
        varchar(255) full_name "DEFAULT NULL, INDEX"
        varchar(255) password "NOT NULL, DEFAULT 1234"
        enum role "NOT NULL, DEFAULT user (admin,manager,user,viewer), INDEX"
        datetime created_at "DEFAULT CURRENT_TIMESTAMP"
        datetime updated_at "DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"
        datetime last_login "DEFAULT NULL"
    }

    user_login_log {
        int log_id PK "NOT NULL, AUTO_INCREMENT"
        varchar(20) user_id FK "DEFAULT NULL, INDEX"
        varchar(100) username "DEFAULT NULL"
        enum event_type "DEFAULT NULL (login,logout,failed_login,password_change)"
        datetime timestamp "DEFAULT CURRENT_TIMESTAMP"
        varchar(50) ip_address "DEFAULT NULL"
        text user_agent "DEFAULT NULL"
        varchar(255) session_id "DEFAULT NULL"
        tinyint(1) success "DEFAULT 1"
    }

    mst_plant ||--o{ mst_location : "plant_code [NO CASCADE]"
    mst_plant ||--o{ asset_master : "plant_code [SET NULL/CASCADE]"
    mst_location ||--o{ asset_master : "location_code [SET NULL/CASCADE]"
    mst_location ||--o{ asset_scan_log : "location_code [NO CASCADE]"
    mst_unit ||--o{ asset_master : "unit_code [RESTRICT/CASCADE]"
    mst_user ||--o{ asset_master : "created_by [RESTRICT/CASCADE]"
    mst_user ||--o{ user_login_log : "user_id [NO CASCADE]"
    mst_user ||--o{ asset_scan_log : "scanned_by [NO CASCADE]"
    mst_user ||--o{ export_history : "user_id [NO CASCADE]"
    mst_user ||--o{ asset_status_history : "changed_by [NO CASCADE]"
    asset_master ||--o{ asset_scan_log : "asset_no [NO CASCADE]"
    asset_master ||--o{ asset_status_history : "asset_no [NO CASCADE]"

    USE rfidassetdb;